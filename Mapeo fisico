CREATE USER 'adminhr'@'localhost' IDENTIFIED BY '12345';
GRANT ALL ON *.* TO 'adminhr'@'localhost';
FLUSH PRIVILEGES;

CREATE DATABASE hr_eventos_db

USE hr_eventos_db

CREATE TABLE participante (
    nombre VARCHAR(44) NOT NULL,
    correo_electronico VARCHAR(20) NOT NULL,
    institucion_de_procedencia VARCHAR(149) NOT NULL,
    tipo_de_participante VARCHAR(10) NOT NULL,
    CONSTRAINT pk_participante PRIMARY KEY (correo_electronico)
);

CREATE TABLE evento (
    titulo_evento VARCHAR(20) NOT NULL,
    tipo_evento VARCHAR(10) NOT NULL,
    fecha_evento DATE NOT NULL,
    codigo VARCHAR(10) NOT NULL,
    cupo_maximo_evento INTEGER NOT NULL,
    ubicacion VARCHAR(149) NOT NULL,
    CONSTRAINT pk_evento PRIMARY KEY (codigo)
);

CREATE TABLE actividad (
    titulo_actividad VARCHAR(20) NOT NULL,
    tipo_actividad VARCHAR(10) NOT NULL,
    codigo_evento VARCHAR(10) NOT NULL,
    codigo VARCHAR(10) NOT NULL,
    cupo_maximo_actividad INTEGER NOT NULL,
    hora_inicio TIME NOT NULL,
    hora_fin TIME NOT NULL,
    correo_del_poniente VARCHAR(25) NOT NULL,
    CONSTRAINT pk_actividad PRIMARY KEY (codigo_evento,correo_del_poniente),
    CONSTRAINT fk_correo_del_poniente FOREIGN KEY (correo_delponiente) REFERENCES participante (correo_electronico),
    CONSTRAINT fk_codigo_evento FOREIGN KEY (codigo_evento) REFERENCES evento (codigo)
);


CREATE TABLE pago (
    correo_participante VARCHAR(20) NOT NULL,
    codigo_evento VARCHAR(10) NOT NULL,
    metodo_pago VARCHAR(7) NOT NULL,
    monto INTEGER NOT NULL,
    CONSTRAINT pk_pago PRIMARY KEY (correo_participante, codigo_evento),
    CONSTRAINT fk_correo_participante FOREIGN KEY (correo_participante) REFERENCES participante (correo_electronico),
    CONSTRAINT fk_codigo_evento FOREIGN KEY (codigo_evento) REFERENCES evento (codigo)
);



CREATE TABLE inscripcion (
    correo_participante VARCHAR(20) NOT NULL,
    codigo_evento VARCHAR(10) NOT NULL,
    tipo_de_inscripcion VARCHAR(7) NOT NULL,
    CONSTRAINT pk_inscripcion PRIMARY KEY (correo_participante, codigo_evento),
    CONSTRAINT fk_correo_participante FOREIGN KEY (correo_participante) REFERENCES participante (correo_electronico),
    CONSTRAINT fk_codigo_evento FOREIGN KEY (codigo_evento) REFERENCES evento (codigo)
);


CREATE TABLE asistencia (
    correo_del_participante VARCHAR(30) NOT NULL,
    codigo_actividad VARCHAR(20) NOT NULL,
    CONSTRAINT pk_asistencia PRIMARY KEY (correo_del_participante, codigo_actividad)
    CONSTRAINT fk_correo_participante FOREIGN KEY (correo_del_participante) REFERENCES participante (correo_electronico)
    CONSTRAINT fk_codigo_actividad FOREIGN KEY (codigo_actividad) REFERENCES actividad (codigo)
);

